<% if flash[:notice] %>
  <div class="notice"><%= flash[:notice] %></div>
<% end %>

<h1>Add Friend</h1>

<% @users.each do |user| %>
	<% if user != current_user %>
		<div class="col s12 m8 offset-m2 l6 offset-l3">
			<div class="card-panel grey lighten-5 z-depth-1">
				<div class="row valign-wrapper">
					<div class="col s2">
						<%= image_tag avatar_img(user), class:"circle responsive-img" %>
					</div>
					<div class="col s10">
						<span class="black-text">
						<p><%=link_to "#{user.first_name} #{user.last_name}", profile_path(user.id) %></p>
						<p><%=user.username%></p>
						<% if not Friendship.exist?(current_user,user)%>
							<%= link_to "Send Friend Request", friendships_path(friend_id: user.id),:method=>:post,data: { confirm: "Are you sure?" } %>
						<% elsif not current_user.requested_friends.where(id:user.id).empty? %>
							<p>You have a friend request from <%=user.email%>.</p>
							<%=link_to "Accept", friends_path(friend_id:user.id), :method => :put %>
							<%=link_to "Decline", friends_path(friend_id:user.id), :method => :delete, data: { confirm: "Are you sure?" } %>
						<% elsif not current_user.pending_friends.where(id:user.id).empty? %>
							<p>The friend request is pending.</p>
						<% else %>
							<p>Friends</p>
						<% end %>
						</span>
					</div>
				</div>
			</div>
		</div>
	<% end %>
<% end %>


		

