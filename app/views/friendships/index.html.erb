<<<<<<< HEAD
<p id="notice"><%= notice %></p>

<h1>Users List</h1>


<% @users.each do |user| %>
    <% unless current_user == user %>
    	<p><%= user.email %></p>
    	<% if (current_user.friendships.find_by_user_id(user.id).nil? && current_user.friendships.find_by_friend_id(user.id).nil?) %>
        	<%= link_to "Add Friend", friendships_path(:friend_id => user.id), :method => :post %>
        <% else %>
        	<p>You are already friends!</p>
        <% end %>
    <% end %>
<% end %>

=======
 <% if flash[:notice] %>
    <div class="notice"><%= flash[:notice] %></div>
 <% end %>

<h1>Lists of User</h1>


<% @users.each do |user| %>
	<% if user != current_user %>
		<p><%=user.email%></p>
		<% if not Friendship.exist?(current_user,user)%>
			<%= link_to "Send Friend Request", friendships_path(friend_id: user.id),:method=>:post,data: { confirm: "Are you sure?" } %>
		<% elsif not current_user.requested_friends.where(id:user.id).empty? %>
			<p>You have a friend request from <%=user.email%>.</p>
			<%=link_to "Accept", friends_path(friend_id:user.id), :method => :put %>
			<%=link_to "Decline", friends_path(friend_id:user.id), :method => :delete, data: { confirm: "Are you sure?" } %>
		<% elsif not current_user.pending_friends.where(id:user.id).empty? %>
			<p>The friend request is pending.</p>
		<% else %>
			<p>Friends</p>
		<% end %>
	<% end %>
<% end %>
>>>>>>> mutual_friendship
